@page "/pdf"
@rendermode InteractiveServer
@inject IJSRuntime JSRuntime
@implements IDisposable

<div id="surveyPdfContainer" style="width:100%; height:100%;"></div>

@code {
    private DotNetObjectReference<Pdf>? dotNetRef;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            dotNetRef = DotNetObjectReference.Create(this);
            await JSRuntime.InvokeVoidAsync(
                "initializeSurveyPdf",
                "/data/survey_json.json",                
                dotNetRef
            );
        }
    }

    [JSInvokable]
    public Task OnSurveyPdfRendered()
    {
        Console.WriteLine("Survey PDF rendered callback received in Blazor");
        return Task.CompletedTask;
    }

    public void Dispose()
    {
        dotNetRef?.Dispose();
    }
}
